<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-12-01
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141201" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ticino - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
				Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
				})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

				ga('create', 'UA-48512184-1', 'micwin.github.io');
				ga('send',
				'pageview');</script>
          
            </head>
        <body class="topBarDisabled">
          
    
    
        
    
    
    <a href="http://github.com/micwin/ticino">
      <img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>ticino site module</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-12-01</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.3.3</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                            
      <li>
    
                          <a href="index.html" title="Welcome!">
          <i class="none"></i>
        Welcome!</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Cookbook</a>
          </li>
                  
      <li>
    
                          <a href="changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                  
      <li>
    
                          <a href="license.html" title="MIT License">
          <i class="none"></i>
        MIT License</a>
            </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://micwin.github.com/ticino/ticino-site" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://micwin.github.com/ticino/ticino-site&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>cookbook<a name="cookbook"></a></h2>
<div class="section">
<h3>General<a name="General"></a></h3>
<p>to use events, we need at least:</p>
<ul>
<li>an event class holding event specific informations (your design):
<ul>
<li>what happened - use a descriptive class name</li>
<li>parameters and context information</li>
<li>results - information that flows from receiver back to dispatcher</li></ul></li>
<li>a dispatcher that wants to dispatch events (your design)</li>
<li>at least one receiver (your design)</li>
<li>a mediator to bring dispatcher and receiver together (EventScope)</li></ul></div>
<div class="section">
<h3>Example <a name="Example"></a></h3>
<div class="source">
<pre>
// the event class we want to dispatch and receive
// Note that this event class is provided by *you*, the developer, not by ticino.

class ShowText {

  private String text ; 
  
  private int count = 0; 

  public ShowText (String pText) {
    this.text = pText ; 
  }

  public String getText () {
    return this.text ; 
  }
  
  // Raises a counter by 1
  public void raise () {
    this.count ++ ; 
  }
  
  public int getCount () {
    return this.count ; 
  }
  
}

// the listener that receives the events

class Listener {
  
  // the receiver method - can have any name and may throw any exception, 
  // but must have the event as sole parameter, and be public.
  
  public void receive (ShowText event) throws IOException {
    System.out.println (event.getText()) ; 
    event.raise () ; 
    
  }

}

// The class to configure and run your application.

class Launcher {

  public static void main (String [] args) {

        // Create the event scope
        EventScope &lt;ShowText&gt; eventScope = new EventScope&lt;ShowText&gt; (ShowText.class) ; 
        
        // Create and register 10 listeners
        for (int i = 0 ; i &lt; 10 ; i++) {
          Listener listener = new Listener (eventScope) ;
          eventScope.register(ShowText.class, listener) ; 
 
        }
        
        // dispatch event
        ShowText event = eventScope.dispatch (new ShowText(&quot;Hello, World!&quot;)) ; 
        
        // post process results
        System.out.println (event.getCount() +&quot; listeners processed&quot; ); 

  }


}</pre></div></div>
<div class="section">
<h3>event inheritance<a name="event_inheritance"></a></h3>
<p>say we have a general event containing logic and data common to all of your events, ...</p>
<div class="source">
<pre>class GeneralEvent {
        // some general stuff
}</pre></div>
<p>... an event containing data for a specific use case and extending GeneralEvent, ...</p>
<div class="source">
<pre>class SpecificEvent extends GeneralEvent {
        // some use case specific data
}</pre></div>
<p>... a receiver triggered by the general event, ...</p>
<div class="source">
<pre>class Receiver {
    public void receive(GeneralEvent event) {
        System.out.println(&quot;got event of &quot; + event.getClass());
    }
}</pre></div>
<p>... a event scope definition</p>
<div class="source">
<pre>    EventScope&lt;GeneralEvent&gt; eventScope = new EventScope &lt;GeneralEvent&gt; (GeneralEvent.class) ; </pre></div>
<p>... some main method bringing event and receiver together (normally you would do that in a spring context) ...</p>
<div class="source">
<pre>public static void main(String[] args) {
    eventScope.register(GeneralEvent.class, new Receiver());
}</pre></div>
<p>... then you could dispatch a specific event like that ...</p>
<div class="source">
<pre>// fire specific event
    Specific event evt = new SpecificEvent();
    eventScope.dispatch(evt);</pre></div>
<p>... and finally get an output like that :</p>
<div class="source">
<pre>got event of class net.micwin.examples.inheritance.Main$SpecificEvent</pre></div></div>
<div class="section">
<h3>migration : general approach <a name="migration_:_general_approach"></a></h3>
<p>being reflection based instead of subclassing and annotating, there is a big migration path from or to ticino. Lets demonstrate the migration in case of wicket - which runs nearly out-of-the-box:</p>
<div class="source">
<pre>public class WicketApplication extends WebApplication {

  @Autowired
  EventScope &lt;MyPayload&gt; eventScope = new EventScope&lt;MyPayload&gt;(MyPayload.class) ;

  @Override
  public void onEvent(IEvent&lt;MyPayLoad&gt; event) {
        // keep the wicket way functioning
        super.onEvent(event);
        
        // but also support strict typed ticino event handling
        eventScope.dispatch (event.getPayload()) ;
  }
}</pre></div>
<p>Somewhere else...</p>
<div class="source">
<pre>public class NoSink {

  @Autowired
  EventScope &lt;MyPayload&gt; eventScope = new EventScope&lt;MyPayload&gt;(MyPayload.class) ;
   
   public NoSink () {
     eventScope.register (MyPayLoad.class , this) ; 
   }
   
   public void blablah (MyPayLoad payload) {
     // doSomething meaningful
   }
   
}</pre></div>
<p>Although there are methods to do so, yo dont have to unregister - ticino does this for you if the receiver gets gc'ed. </p></div>
<div class="section">
<h3>best practices<a name="best_practices"></a></h3>
<div class="section">
<h4>Dont use basic types as events<a name="Dont_use_basic_types_as_events"></a></h4>
<p>Althougt ticino allows to use ie java.lang.String or java.lang.Integer as event types, we strongly discourage this approach. In general, use event whose names describe the purpose of the event, or its inner structure. This said, what's the purpose of dispatching a String?</p></div>
<div class="section">
<h4>Name your events according to their domain purpose<a name="Name_your_events_according_to_their_domain_purpose"></a></h4>
<p>Since it is a technical driven naming, IncomingXmlEvent from Example 1 is a discouraged naming for an event. If possible, give more insight into the data provided with this event. In case of the given IncomingXmlEvent you probably might say ie UpdateFlightDataXmlEvent instead.</p></div>
<div class="section">
<h4>Be careful what you dispatch<a name="Be_careful_what_you_dispatch"></a></h4>
<p>Since ticino senders have no meanings to control who catches their events, you probably shoud avoid including such secret things like passwords etc in your events. When using multiple event scopes, use the base type constructor to better control which events are fired on which event scope. Also, since they mostly come along with a whole bunch of references, you should think twice including database entities, transaction managers, EJBs, session data et al in your events. It probably might be most useful and of a specific charm throwing a NewRequestEvent, a CreateUserEvent or a LoadMandateEvent as long the drawbacks are well considered.</p></div>
<div class="section">
<h4>Use Spring<a name="Use_Spring"></a></h4>
<p>Using spring to connect dispatcher and receiver enforces the loose end characteristics of ticino and hence is highly recommended. Of course you might use another DI or IOC framework as well. Although the spring integration is on rework with 0.3.3, you surely can define beans from event scopes and register listeners in an init method.</p></div>
<div class="section">
<h4>xxxEvent vs <i>not</i><a name="xxxEvent_vs_not"></a></h4>
<p>Sometimes, its useful to make explicit the fact that a data structure is an event, sometimes not. I most time love short code but only in a context where all participants exactly know the technical background of the software. With above example, instead of UpdateFlightDataXmlEvent, I most likely would prefer IncomingFlightUpdate (and even hide the xml characteristics of the data), but imho that really is a matter of taste. AND, in the case you might reuse a class for multiple purposes,...</p></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2014.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>
