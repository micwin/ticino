<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-11-29
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20151129" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ticino &#x2013; Welcome to the ticino events module!</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
        
    
    
    <a href="http://github.com/micwin/ticino">
      <img style="position: absolute; top: 0; left: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>ticino events</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-11-29</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.3.6</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Welcome!</li>
                                
      <li>
    
                          <a href="../index.html" title="ticino modules">
          <i class="none"></i>
        ticino modules</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>ticino events</a>
          </li>
                  
      <li>
    
                          <a href="../ticino-context/index.html" title="ticino context">
          <i class="none"></i>
        ticino context</a>
            </li>
                                      
      <li>
    
                          <a href="../changelog.html" title="change log">
          <i class="none"></i>
        change log</a>
            </li>
                  
      <li>
    
                          <a href="../license.html" title="MIT License">
          <i class="none"></i>
        MIT License</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                      
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-down"></i>
        Project Information</a>
                    <ul class="nav nav-list">
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>About</a>
          </li>
                      
      <li>
    
                          <a href="plugin-management.html" title="Plugin Management">
          <i class="none"></i>
        Plugin Management</a>
            </li>
                      
      <li>
    
                          <a href="distribution-management.html" title="Distribution Management">
          <i class="none"></i>
        Distribution Management</a>
            </li>
                      
      <li>
    
                          <a href="dependency-info.html" title="Dependency Information">
          <i class="none"></i>
        Dependency Information</a>
            </li>
                      
      <li>
    
                          <a href="source-repository.html" title="Source Repository">
          <i class="none"></i>
        Source Repository</a>
            </li>
                      
      <li>
    
                          <a href="mail-lists.html" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                      
      <li>
    
                          <a href="issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                      
      <li>
    
                          <a href="integration.html" title="Continuous Integration">
          <i class="none"></i>
        Continuous Integration</a>
            </li>
                      
      <li>
    
                          <a href="plugins.html" title="Project Plugins">
          <i class="none"></i>
        Project Plugins</a>
            </li>
                      
      <li>
    
                          <a href="license.html" title="Project License">
          <i class="none"></i>
        Project License</a>
            </li>
                      
      <li>
    
                          <a href="dependency-management.html" title="Dependency Management">
          <i class="none"></i>
        Dependency Management</a>
            </li>
                      
      <li>
    
                          <a href="team-list.html" title="Project Team">
          <i class="none"></i>
        Project Team</a>
            </li>
                      
      <li>
    
                          <a href="project-summary.html" title="Project Summary">
          <i class="none"></i>
        Project Summary</a>
            </li>
                      
      <li>
    
                          <a href="dependencies.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://ticino.micwin.net/ticino-events" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://ticino.micwin.net/ticino-events&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Welcome to the ticino events module!</h1>
<p>the ticino events module is java library that adresses the problem of decoupling dependent modules from each other. It introduces an intermediary <i>EventScope</i>.</p>
<div class="section">
<h2><a name="former_times"></a>former times</h2>
<p>Normally, you would code somethign like this : </p>

<div class="source">
<div class="source">
<pre>import receiver.package.ReceiverClass
import dispatcher.package.DispatcherClass

...

ClassName receiver = ...

... 

ClassName dispatcher = ...

...

receiver.notify (param1, param2, param3) ; 
</pre></div></div>
<p>Short and small, isn&#x2019;t it? But there are a couple of problems with that:</p>

<ul>
  
<li>if signature of the notify method changes (adding/removing parameters, or renaming method), you have to adjust both dispatching and receiving code.</li>
  
<li>the dispatcher has to have an instance of the receiver and can do with that whatever it likes - calling other methods that alter state, or attach interceptors, for instance.</li>
  
<li>if the event has to be delegated to another receiver, the responsibility is unclear.</li>
  
<li>The responsibility in case of an error is also unclear</li>
  
<li>dispatcher has to follow naming aproach given by the notify method, no  matter what naming aproach is common in the context of the dispatcher.</li>
</ul>
<p>hence, although this aproach looks like good practice, it in fact breaks encapsulation on an abstract level. </p></div>
<div class="section">
<h2><a name="the_ticino_events_approach"></a>the ticino events approach</h2>
<p>in ticino events, each distinct event is represented by a corresponding class:</p>

<div class="source">
<div class="source">
<pre>// for instance, we could use a marker interface as some sort of base
public interface IEvent {
}

// an event signaling that we connected to a remote entity
public class Connected implements IEvent {
}

// an event signaling we disconnected again
public class Disconnected implements IEvent {
}

// we're going down
public ShutDown implements IEvent {
}
</pre></div></div>
<p>The receiver then looks as follows:</p>

<div class="source">
<div class="source">
<pre>public class Receiver {

    public Receiver (EventScope &lt;IEvent&gt; pEventScope) {

       // register to what we want to receive
       pEventScope.register (Connected.class, this); 
       pEventScope.register (Disconnected.class,this) ; 
       pEventScope.register(ShutDown.class) ; 

       // of course you donnot have to register to all events, just these
       // you can and/or want to handle
    }

    public void yeeha (Connected pEvent) {
       System.out.println (&quot;We are connected arent we?&quot; ) ;
    }

    public void handle (Disconnected pEvent) {
       System.out.println (&quot;Not connected any more&quot; ) ;
    }

    public void down (ShutDown pEvent) {
       System.out.println (&quot;This is ending soon&quot; ) ;
    }
}
</pre></div></div>
<p>ticino does not care about method names, only about parameter types, which correspond with distinct event types.</p>
<p>THe method, though, has to be accessible, that is public and non- abstract, non-virtual. And there only has to be exactly <i>one</i> method with accepts each distinct event types. Otherwise ticino events does not know where to put the event to.</p>
<p>More about the method name: you can choose a method name that is approppriate for this class or the module this class is in. For instance, you could amplify the fact that here happens event handling by choosing method naming like <i>doEvent()</i> or <i>process()</i>; if the method is part of a final class, you simply  could use one of the methods already defined. In fact, there <i>is</i> a way of  delegating events to a <i>LinkedList</i>, a <i>TreeSet</i> or even a <i>StringBuffer</i> but  I won&#x2019;t ya - go find it by yourself ;)</p>
<p>Back to the basics; a dispatcher has to have a reference to the event scope and the ability to create an event instance:</p>

<div class="source">
<div class="source">
<pre>private class Dispatcher {

    EventScope &lt;IEvent&gt; fEventScope ; 

    public Dispatcher (EventScope&lt;IEvent&gt; pEventScope) {
       fEventScope = pEventScope ; 
    }

    public void connect() {

       ... connecting ...

       fEventScope.dispatch (new Connected() ) ; 

       // no dependencies or direct handle to the receiver ;)
    }

    public void disconnect() {

       ... disconnecting ...

       fEventScope.dispatch (new Disconnected() ) ; 
       // again, no dependencies or direct handle to the receiver ;)
    }


    public void shutdown() {

       // first disconnect
       disconnect () ;

       // then shut down

       fEventScope.dispatch (new ShutDown() ) ; 
    }

}
</pre></div></div></div>
<div class="section">
<h2><a name="return_values"></a>return values</h2>
<p>You surely could implement a kind of return value and use that as a sort of processing trigger:</p>

<div class="source">
<div class="source">
<pre>public class PingEvent {
    boolean fProcessed

    public void markProcessed() {
       fProcessed = true ; 
    }

    public boolean isProcessed () {
       return fProcessed ; 
    }
}
</pre></div></div>
<p>A receiver &#x2026;</p>

<div class="source">
<div class="source">
<pre>public class Receiver {
    ...       
    public void process (Ping pEvent) {
       if (!pEvent.isProcessed() {
         // do some magic
         pEvent.markProcessed() ; 
       }
    }
}
</pre></div></div>
<p>A dispatcher &#x2026;</p>

<div class="source">
<div class="source">
<pre>public void doSomething() {

    System.out.prinln (&quot;Ping : fPingScope.dispatch(new Ping()).isProcessed()) ; 

}
</pre></div></div>
<p><i>EventScope.dispatch</i> returns the event itself so, if you see above, chaining is quite handy when processing return values.</p></div>
<div class="section">
<h2><a name="some_notes"></a>some notes</h2>

<ul>
  
<li>
<p>the check wether a receiver has the appropriate handler method is done at runtime, when EventScope.register is called. A very elaborate, clear and loud exception is thrown when a problem occurrs.</p></li>
  
<li>
<p>ticino events uses soft references. If listeners get garbage collected, ticino events also will remove them, so make sure your listeners will not vanish because of sole purpose listenijg to ticino. Use handler types instead and store them in the class that instantiates them.</p></li>
  
<li>
<p>a good place to instantiate event scopes is a main method, or a spring context.</p></li>
  
<li>
<p>you could also dispatch asynchronously. Please see documentation of EventScope.dispatchAsynchronously() for that.</p></li>
  
<li>
<p>in above example, you also could register to IEvent; in that case, you would get all dispatched events implementing IEvent. If you register both to the interface and the explicit classes, you will get notified twice for each explicit class. if you register multiple times to the same event, you will get notified multiple times.</p></li>
  
<li>
<p>of course you could add some state information to the event classes. In fact, this is the intended use!</p></li>
  
<li>
<p>every exception thrown by a receiver is wrapped in a DispatchException, which is a RuntimeException. Hence, since you do have to mess around with runtime exceptions, you are not limited in selecting the throws clause of the receiver method. If your eceiver method does not want to mess around witn an IOException, just add a throws IOException to the method header and let the dispatcher handle that.</p></li>
  
<li>
<p>ticino events does not limit the design of event classesnor analyze or call any methods nor proxy or wrap them in whatsoever. If you already have a method or event class from another events framework, it is abolutely perfect (from a ticino events view) to use them with ticino.</p></li>
  
<li>
<p>donot put any algorithms or logic into the event classes. these should be sole value or state holders.</p></li>
  
<li>
<p>Although ticino events does not limit that, make sure to not incorporate sensitive data in your events or, if you have to, make sure no one not intended gets a grip on the corresponding event scope.</p></li>
  
<li>
<p>you surely could use primitives as events as well. using strings surely is a good choice if the decision which string means what event should be done by the receiver itself - or if you simply use ticino as a means of simple intra-vm data transport multiplexer.</p></li>
  
<li>
<p>be careful when dispatching an event while handling another one. Could result in a deadlock. When you have to, consider using <i>EventScope.dispatchAsynchronously</i> when dispatching inside a event handler.</p></li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2015.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>
